{"version":3,"sources":["common.js"],"names":["getStrLeng","str","realLength","len","length","charCode","i","charCodeAt","imgUpload","obj","console","log","fileData","files","reader","size","type","FileReader","onload","e","data","target","result","image","Image","width","height","alert","$","val","prev","html","src","readAsDataURL","fileChange","fileSize","isIE","filePath","value","fileSystem","ActiveXObject","file","GetFile","Size","name","fileName","substring","lastIndexOf","toLowerCase","filefujianChange","refresh","window","location","href","tr_order","this","parent","next","after","fun","isMobile","reg","test","show","yzm","pwd","rege","repeatpwd","firstvaluea","lastvaluea","isMail","isMc","trim","isDes","isCode","isPhone","isLoginName","isNum","fn","TChecker","opts","$this","$validator","nextAll","status","ele","doError","error","msg","focus","hide","blur","required","rule","format","custom","correct","check","once"],"mappings":"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","file":"common.js","sourcesContent":["\r\n//// UTF8字符集实际长度计算\r\nfunction getStrLeng(str){\r\n    var realLength = 0;\r\n    var len = str.length;\r\n    var charCode = -1;\r\n    for(var i = 0; i < len; i++){\r\n        charCode = str.charCodeAt(i);\r\n        if (charCode >= 0 && charCode <= 128) {\r\n            realLength += 1;\r\n        }else{\r\n            // 如果是中文则长度加3\r\n            realLength += 3;\r\n        }\r\n    }\r\n    return realLength;\r\n}\r\n// 注册登录框  密码 手机 邮箱的验证\r\nvar fun = {\r\n    isMobile: function(value) {\r\n        var reg = /^1[3|4|5|7|8]\\d{9}$/;\r\n        if (!reg.test(value)) {\r\n            $(this).next().show();\r\n            return false;\r\n        }return true;\r\n        return true;\r\n    },\r\n    yzm: function(value) {\r\n        if (value == \"\") {\r\n            $(this).next().show();\r\n            return false;\r\n        }return true;\r\n        return true;\r\n    },\r\n    pwd: function(value) {\r\n        var rege = /^.{6,20}$/;\r\n        if (!rege.test(value)) {\r\n            $(this).next().show();\r\n            return false;\r\n        }return true;\r\n        if (value === '') {\r\n            $(this).next().show();\r\n            return false;\r\n        }return true;\r\n        return true;\r\n    },\r\n    repeatpwd: function(firstvaluea, lastvaluea) {\r\n        if (firstvaluea !== lastvaluea) {\r\n            $(this).next().show();\r\n            return false;\r\n        }return true;\r\n        return true;\r\n    },\r\n    isMail: function(value) {\r\n        // var reg = /^\\w+((-\\w+)|(\\.\\w+))*\\@[A-Za-z0-9]+((\\.|-)[A-Za-z0-9]+)*\\.[A-Za-z0-9]+$/g;\r\n        // var reg=/^[a-zA-Z0-9_-]+([\\.a-zA-Z0-9_-]{6,128})+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]{2,6})$/;\r\n            var reg=/^([a-zA-Z0-9_\\.\\-])+\\@(([a-zA-Z0-9\\-])+\\.)+([a-zA-Z0-9]{2,8})$/;\r\n        if (!reg.test(value)) {\r\n            $(this).next().show();\r\n            return false;\r\n        }return true;\r\n        if (value == '') {\r\n            $(this).next().show();\r\n            return false;\r\n        }return true;\r\n        return true;\r\n    },\r\n    // 名称验证1 -128 位\r\n    isMc:function(value){\r\n        var reg = /^.{1,128}$/;\r\n        if(!reg.test($.trim(value))){\r\n            $(this).next().show();\r\n            return false;\r\n        }return true;\r\n    },\r\n    // 备注 长度不大于2048\r\n    isDes:function(value){\r\n        var reg = /^.{0,2048}$/;\r\n        if(!reg.test(value)){\r\n            $(this).next().show();\r\n            return false;\r\n        }return true;\r\n    },\r\n    // key code 校验\r\n    isCode:function(value){\r\n        // 以 0x或0X 开始 后面加两位有数字字母组成不区分大小写\r\n        var reg=/^([0]{1})+([xX]{1})+([0-9a-zA-Z]{2})$/;\r\n        if(!reg.test(value)){\r\n            $(this).next().show();\r\n            return false;\r\n        }return true;\r\n    },\r\n    // 电话号码的校验 区号 3-4位- 后面7-8位数字  如：029-8888888\r\n    isPhone:function(value){\r\n        reg= /^(\\d{3,4}\\-)?[1-9]\\d{6,7}$/;\r\n        if(!reg.test(value)){\r\n            $(this).next().show();\r\n            return false;\r\n        }return true;\r\n    },\r\n    //登录名的 4-128\r\n    isLoginName:function(value){\r\n        var reg = /^.{4,128}$/;\r\n        if(!reg.test(value)){\r\n            $(this).next().show();\r\n            return false;\r\n        }\r\n        return true;\r\n    },\r\n    // 输入正整数\r\n    isNum:function(value){\r\n        var reg=/^[1-9]\\d*$/;\r\n        if(!reg.test(value)){\r\n             $(this).next().show();\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n}\r\n\r\n//为文本框写的简易校验器\r\n//var nameChecker = $(\"#txtName\").TChecker({\r\n//    required: { rule: true, error: \"请输入您的名字\" },\r\n//    format: { rule: /^[a-z]+$/, error: \"您的名字格式不正确\" }\r\n//});\r\n\r\n$.fn.TChecker = function (opts) {\r\n    var $this = this;\r\n    var $validator = $this.nextAll(\".tishi\");\r\n    var status = 0;\r\n\r\n    if (opts.ele) $validator = $(opts.ele);\r\n\r\n    var doError = function (error, msg) {\r\n        if (error) {\r\n            $validator.html(msg);\r\n            $validator.show();\r\n            $this.focus();\r\n            return true;\r\n        }\r\n        else {\r\n            $validator.html(\"\");\r\n            $validator.hide();\r\n            return false;\r\n        }return true;\r\n    }\r\n\r\n    $this.blur(function () {\r\n        status = 1;\r\n        var value = $this.val();\r\n\r\n        if (opts.required) {\r\n            if (doError(opts.required.rule && value == \"\", opts.required.error)) return false;\r\n        }\r\n        if (opts.format) {\r\n            if (doError(!opts.format.rule.test(value), opts.format.error)) return false;\r\n        }\r\n        if (typeof opts.custom == \"function\") {\r\n            var result = opts.custom(value);\r\n            if (doError(!result.rule, result.error)) return false;\r\n        }\r\n    });\r\n\r\n    return {\r\n        correct: $validator.html() === \"\",\r\n        check: function (once) {\r\n            once = (once != false);\r\n            if (status === 0 || !once) {\r\n                $this.blur();\r\n            }\r\n            var correct = $validator.html() === \"\";\r\n            if (!correct) $this.focus();\r\n            return correct;\r\n        }\r\n    };\r\n};\r\n\r\nfunction imgUpload(obj){\r\n    debugger;\r\n       console.log(obj);\r\n       var fileData = obj.files[0];\r\n       var size = fileData.size;\r\n       var type=fileData.type;\r\n\r\n       var reader = new FileReader();\r\n\r\n       reader.onload = function (e) {\r\n\r\n        var data = e.target.result;\r\n\r\n\r\n        //加载图片获取图片真实宽度和高度\r\n        var image = new Image();\r\n\r\n        image.onload=function(){\r\n            var width = image.width;\r\n            var height = image.height;\r\n            // if(width!=1080 && height!=400){\r\n            if(width<1080 && height<400){\r\n                alert('规格错误，请上传1080*400的图片');\r\n                $('input[name=\"picurl\"]').val(null);\r\n                return false;\r\n            }\r\n\r\n            $(obj).prev(\"i\").html(\"<img style='display:block;width:108px;height:108px;' src='\"+data+\"'>\");\r\n\r\n        };\r\n        image.src= data;\r\n\r\n    };\r\n\r\n\r\n    //读取文件的base64数据\r\n       reader.readAsDataURL(fileData);\r\n\r\n }\r\n\r\n\r\nfunction fileChange(target) {\r\n     var fileSize = 0;\r\n     if (isIE && !target.files) {\r\n       var filePath = target.value;\r\n       var fileSystem = new ActiveXObject(\"Scripting.FileSystemObject\");\r\n       var file = fileSystem.GetFile (filePath);\r\n       fileSize = file.Size;\r\n     } else {\r\n      fileSize = target.files[0].size;\r\n      }\r\n      var size = fileSize / 1024;\r\n      if(size>2000){\r\n       alert(\"附件不能大于2M\");\r\n       target.value=\"\";\r\n       return\r\n      }\r\n      var name=target.value;\r\n      var fileName = name.substring(name.lastIndexOf(\".\")+1).toLowerCase();\r\n      if(fileName !=\"xls\" && fileName !=\"xlsx\"){\r\n          alert(\"请选择execl格式文件上传！\");\r\n          target.value=\"\";\r\n          return\r\n      }\r\n    }\r\n\r\nfunction filefujianChange(target) {\r\n       var fileSize = 0;\r\n       if (isIE && !target.files) {\r\n         var filePath = target.value;\r\n         var fileSystem = new ActiveXObject(\"Scripting.FileSystemObject\");\r\n         var file = fileSystem.GetFile (filePath);\r\n         fileSize = file.Size;\r\n       } else {\r\n        fileSize = target.files[0].size;\r\n        }\r\n        var size = fileSize / 1024;\r\n        if(size>2000){\r\n         alert(\"附件不能大于2M\");\r\n         target.value=\"\";\r\n         return\r\n        }\r\n        var name=target.value;\r\n        var fileName = name.substring(name.lastIndexOf(\".\")+1).toLowerCase();\r\n        if(fileName !=\"jpg\" && fileName !=\"jpeg\" && fileName !=\"pdf\" && fileName !=\"png\" && fileName !=\"dwg\" && fileName !=\"gif\" ){\r\n          alert(\"请选择图片格式文件上传(jpg,png,gif,dwg,pdf,gif等)！\");\r\n            target.value=\"\";\r\n            return\r\n        }\r\n      }\r\nfunction refresh(){\r\n    window.location.href=\"\";\r\n}\r\n\r\n// 列表行互换顺序\r\nfunction tr_order(){\r\n    if($(this).parent().parent().next())\r\n    $(this).parent().parent().next().after($(this).parent().parent());\r\n\r\n}\r\n\r\n"]}